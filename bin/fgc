#!/usr/bin/python

import fileinput
import json

for line in fileinput.input():
    cd = json.loads(line)
    try:
        print cd['number'] + ' - Branch: ' + cd['branch'] + ' - Patchset: ' \
                + cd['currentPatchSet']['number'] + ' - Owner: ' \
                + cd['owner']['email'] + ' - Status: ' + cd['status'] \
                + ' - Subject: ' + cd['subject']
        if cd['currentPatchSet']['approvals']:
            for approval in cd['currentPatchSet']['approvals']:
                print '\t' + approval['by']['email'] + ' - ' + approval['type'] \
                        + '.' + approval['value'] + ' - ' + approval['description']
    except KeyError:
        print 'found ' + str(cd['rowCount']) + ' matching change(s)'

